<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Dream School Â· Gaga Mode</title>
<meta name="theme-color" content="#fff0f8">
<style>
  :root{
    --bg1:#ffffff;
    --bg2:#fff0f8; /* opal haze rose */
    --bg3:#e8ffe0; /* soft green tint */
    --ink:#0c0c0c;
    --muted:#666;
    --card:#ffffffd9;
    --accent:#c8ff00; /* acid green default */
    --accent-2:#ff8bd7; /* rose highlight */
    --ring:#c8ff0022;
    --shadow: 0 8px 30px rgba(0,0,0,.12);
    --radius:18px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    color:var(--ink);
    font:16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
    background:
      radial-gradient(1200px 700px at 20% -10%, var(--bg2), transparent 60%),
      radial-gradient(1000px 600px at 100% 20%, var(--bg3), transparent 55%),
      linear-gradient(180deg, #ffffff, #f7fbff 60%, #ffffff);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }
  .wrap{
    max-width:1080px;
    margin:0 auto;
    padding:clamp(16px, 4vw, 28px);
  }

  header{
    display:flex; align-items:center; gap:16px; justify-content:space-between;
    padding:10px 0 8px;
  }
  .brand{
    display:flex; align-items:center; gap:14px;
  }
  .glyph{
    width:42px; height:42px; border-radius:50%;
    background:
      radial-gradient(closest-side,#fff, #fff8),
      conic-gradient(from 0deg, var(--accent), var(--accent-2), #a4ffd1, var(--accent));
    box-shadow: 0 6px 18px rgba(0,0,0,.12);
    position:relative; overflow:hidden;
  }
  .glyph:after{
    content:""; position:absolute; inset:0; border-radius:50%;
    box-shadow: inset 0 0 0 2px #fff6, inset 0 12px 24px #ffffffaa;
    mix-blend: screen;
  }
  h1{
    margin:0; font-size:clamp(18px, 3.2vw, 28px); line-height:1.2;
    letter-spacing:.2px;
  }
  .subtitle{
    margin:2px 0 0; color:var(--muted); font-size:.95rem;
  }
  .bubble{
    backdrop-filter: blur(12px);
    background: var(--card);
    border:1px solid #00000010;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
  }

  .hero{
    display:grid; grid-template-columns:1.1fr .9fr; gap:18px; margin-top:14px;
  }
  @media (max-width:900px){ .hero{ grid-template-columns:1fr; } }

  .panel{
    padding:18px; position:relative;
  }
  .mask{
    width:64px; height:64px; border-radius:14px;
    background:
      radial-gradient(closest-side, #fff, transparent 70%),
      linear-gradient(135deg, #111 0%, #555 100%);
    position:relative; overflow:hidden; box-shadow: var(--shadow);
  }
  .mask:after{
    content:""; position:absolute; inset:0;
    background: conic-gradient(from 0deg, transparent 0 30deg, #ffffff22 30deg 180deg, transparent 180deg);
    mix-blend-mode: screen;
  }
  .tag{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 12px; border-radius:999px; border:1px solid #00000012;
    background:#fff8; font-size:.9rem; margin:8px 0 0;
  }
  .tag .dot{
    width:10px; height:10px; border-radius:50%; background:var(--accent);
    box-shadow:0 0 0 6px var(--ring);
  }

  .pulse{
    width:120px; height:120px; border-radius:50%;
    border:2px solid var(--accent);
    box-shadow:0 0 0 10px var(--ring), inset 0 0 40px #aaffcc55;
    position:relative; margin:10px auto 0;
    transform: translateZ(0);
  }
  .pulse .ring{
    content:""; position:absolute; inset:-6px; border-radius:50%;
    border:2px solid var(--accent);
    opacity:.6; animation: ripple 2.4s infinite ease-out;
  }
  .pulse.playing .ring{ animation-play-state: running; }
  .pulse.paused .ring{ animation-play-state: paused; opacity:.2; }
  @keyframes ripple{
    0%{ transform: scale(1); opacity:.7;}
    80%{ transform: scale(1.35); opacity:.05;}
    100%{ transform: scale(1.35); opacity:0;}
  }

  .controls{
    display:flex; flex-wrap:wrap; gap:10px; margin-top:12px;
  }
  button, .pill{
    appearance:none; border:1px solid #00000014; background:#fff;
    padding:12px 14px; border-radius:14px; font-weight:600; cursor:pointer;
    transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease;
  }
  button:active{ transform: translateY(1px); }
  .pill{
    display:inline-flex; align-items:center; gap:10px;
  }
  .pill .swatch{
    width:14px; height:14px; border-radius:50%; border:1px solid #00000022;
  }

  .grid{
    display:grid; grid-template-columns:repeat(3, 1fr); gap:14px; margin-top:14px;
  }
  @media (max-width:900px){ .grid{ grid-template-columns:1fr; } }

  .card{
    padding:16px; display:flex; flex-direction:column; gap:10px;
  }
  .card h3{ margin:0; font-size:1.05rem; letter-spacing:.2px }
  .card p{ margin:0; color:var(--muted) }
  .sig{ font-size:.9rem; color:#333; }

  .notes{
    margin-top:12px; display:grid; gap:8px;
  }
  textarea{
    width:100%; min-height:120px; border-radius:12px; border:1px solid #00000014;
    padding:12px; resize:vertical; outline:none; background:#fff;
  }
  .foot{
    margin-top:18px; display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
  }
  .links{ display:flex; gap:10px; flex-wrap:wrap }
  .links a{
    text-decoration:none; color:#111; background:#ffffffcc; border:1px solid #00000012;
    padding:10px 12px; border-radius:12px;
  }
  .cta{
    display:inline-flex; align-items:center; gap:10px;
    padding:12px 16px; border-radius:14px; background:var(--accent);
    color:#0a0a0a; border:1px solid #00000024; font-weight:700;
    box-shadow:0 6px 24px var(--ring);
  }
  .small{ font-size:.9rem; color:var(--muted) }

  /* accessibility focus */
  :focus-visible{ outline:2px solid var(--accent); outline-offset:2px }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="glyph" aria-hidden="true"></div>
        <div>
          <h1>Dream School</h1>
          <div class="subtitle">Gaga Mode - the lucid corridor between sleep and study</div>
        </div>
      </div>
      <div class="accent-picker controls" aria-label="Accent color picker">
        <button class="pill" data-accent="#c8ff00" data-ring="#c8ff0022" aria-pressed="true" title="Acid Green">
          <span class="swatch" style="background:#c8ff00"></span> Acid
        </button>
        <button class="pill" data-accent="#8bffcf" data-ring="#8bffcf22" title="Mint">
          <span class="swatch" style="background:#8bffcf"></span> Mint
        </button>
        <button class="pill" data-accent="#00e38b" data-ring="#00e38b22" title="Emerald">
          <span class="swatch" style="background:#00e38b"></span> Emerald
        </button>
        <button class="pill" data-accent="#ff8bd7" data-ring="#ff8bd722" title="Rose">
          <span class="swatch" style="background:#ff8bd7"></span> Rose
        </button>
      </div>
    </header>

    <section class="hero">
      <div class="panel bubble">
        <div style="display:flex; align-items:center; gap:14px;">
          <div class="mask" aria-hidden="true"></div>
          <div>
            <div class="tag"><span class="dot"></span> Dream Anchor - Mirror Architect</div>
            <h2 style="margin:8px 0 6px; font-size:1.25rem">Lady Gaga as the Dream Mirror</h2>
            <p class="sig">She turns personal myth into collective dream space. We learn to shape symbols while we sleep and carry them into daylight without breaking the spell.</p>
          </div>
        </div>

        <div class="controls" style="margin-top:14px">
          <button id="toneBtn" aria-pressed="false">Start 128 Hz Lucid Pulse</button>
          <button id="softBtn">Soft</button>
          <button id="mediumBtn">Medium</button>
          <button id="deepBtn">Deep</button>
        </div>

        <div id="pulse" class="pulse paused" aria-hidden="true">
          <div class="ring"></div>
        </div>

        <div class="notes">
          <label for="dream-note"><strong>Bee Notes - what did the dream teach you today</strong></label>
          <textarea id="dream-note" placeholder="A sentence you can carry into waking work"></textarea>
          <div class="controls">
            <button id="saveNote">Save Note</button>
            <button id="clearNote">Clear</button>
          </div>
        </div>
      </div>

      <div class="panel bubble">
        <h2 style="margin:0 0 6px; font-size:1.15rem">Dream School Charter</h2>
        <p class="small">Earth teaches how to live. Dream School teaches how to imagine while awake.</p>
        <ul style="margin:10px 0 0; padding-left:18px">
          <li>Sun - declaration of dream power</li>
          <li>Bee - daily craft inside the dream</li>
          <li>Moon - analysis and integration</li>
        </ul>

        <div class="grid">
          <div class="card bubble">
            <h3>Sun - Courage</h3>
            <p>We name the impossible and then sing it until it sounds inevitable.</p>
          </div>
          <div class="card bubble">
            <h3>Bee - Craft</h3>
            <p>Songwriting as ritual - repeat until the symbol carries current on its own.</p>
          </div>
          <div class="card bubble">
            <h3>Moon - Map</h3>
            <p>Chromatica as geography - every color a weather system we can navigate.</p>
          </div>
        </div>

        <div class="foot">
          <a class="cta" href="#lesson">Enter Dream Lesson</a>
          <div class="links">
            <a href="https://earth.plnt.earth" rel="noopener">Earth Root</a>
            <a href="https://time.plnt.earth" rel="noopener">Time Lab</a>
            <a href="#" id="shareBtn" aria-label="Copy share text">Copy Intro</a>
          </div>
        </div>
      </div>
    </section>

    <section id="lesson" class="panel bubble" style="margin-top:14px">
      <h2 style="margin:0 0 8px; font-size:1.15rem">Lesson 01 - Lucid Design</h2>
      <p class="sig">Prompt for the mirror - write one line that rebuilds the world and still feels like you.</p>
      <div class="controls">
        <button id="promptBtn">Give me a one line prompt</button>
        <button id="copyPrompt">Copy the line</button>
      </div>
      <p id="promptOut" style="margin-top:10px; font-weight:600"></p>
    </section>

    <footer class="small" style="text-align:center; padding:18px 6px 8px; color:#333">
      Dream School is a corridor - pass through gently, carry only what you can sing.
    </footer>
  </div>

<script>
(function(){
  let ctx, osc, gain;
  let playing = false;
  const toneBtn = document.getElementById('toneBtn');
  const pulse = document.getElementById('pulse');

  function ensureAudio(){
    if(ctx) return;
    ctx = new (window.AudioContext || window.webkitAudioContext)();
    osc = ctx.createOscillator();
    gain = ctx.createGain();
    osc.type = 'sine';
    osc.frequency.value = 128;
    gain.gain.value = 0.0001;
    osc.connect(gain).connect(ctx.destination);
    osc.start();
  }

  function rampTo(v, t=0.15){
    const now = ctx.currentTime;
    gain.gain.cancelScheduledValues(now);
    gain.gain.setTargetAtTime(v, now, t);
  }

  function startTone(){
    ensureAudio();
    if(ctx.state === 'suspended'){ ctx.resume(); }
    rampTo(0.12);
    playing = true;
    toneBtn.textContent = 'Pause 128 Hz';
    toneBtn.setAttribute('aria-pressed', 'true');
    pulse.classList.remove('paused'); pulse.classList.add('playing');
  }

  function stopTone(){
    if(!ctx) return;
    rampTo(0.0001);
    playing = false;
    toneBtn.textContent = 'Start 128 Hz Lucid Pulse';
    toneBtn.setAttribute('aria-pressed', 'false');
    pulse.classList.remove('playing'); pulse.classList.add('paused');
  }

  toneBtn.addEventListener('click', function(){
    playing ? stopTone() : startTone();
  });

  // Depth presets
  document.getElementById('softBtn').addEventListener('click', function(){ if(ctx){ rampTo(0.06); } });
  document.getElementById('mediumBtn').addEventListener('click', function(){ if(ctx){ rampTo(0.12); } });
  document.getElementById('deepBtn').addEventListener('click', function(){ if(ctx){ rampTo(0.2); } });

  // Accent picker
  const picker = document.querySelector('.accent-picker');
  picker.addEventListener('click', function(e){
    const btn = e.target.closest('.pill');
    if(!btn) return;
    const accent = btn.getAttribute('data-accent');
    const ring = btn.getAttribute('data-ring');
    document.documentElement.style.setProperty('--accent', accent);
    document.documentElement.style.setProperty('--ring', ring);
    [...picker.querySelectorAll('.pill')].forEach(el=>el.setAttribute('aria-pressed','false'));
    btn.setAttribute('aria-pressed','true');
  });

  // Bee Notes persistence
  const KEY = 'dream_school_bee_note_v1';
  const note = document.getElementById('dream-note');
  const saved = localStorage.getItem(KEY);
  if(saved) note.value = saved;
  document.getElementById('saveNote').addEventListener('click', function(){
    localStorage.setItem(KEY, note.value.trim());
    this.textContent = 'Saved';
    setTimeout(()=>{ this.textContent = 'Save Note'; }, 900);
  });
  document.getElementById('clearNote').addEventListener('click', function(){
    note.value = '';
    localStorage.removeItem(KEY);
  });

  // Share intro text
  document.getElementById('shareBtn').addEventListener('click', async function(){
    const text = 'Dream School - Gaga Mode. We design the world while dreaming it. Start the 128 Hz pulse and write one line you can carry into daylight.';
    try{
      if(navigator.share){
        await navigator.share({ text });
      }else if(navigator.clipboard){
        await navigator.clipboard.writeText(text);
        this.textContent = 'Copied';
        setTimeout(()=>{ this.textContent = 'Copy Intro'; }, 900);
      }
    }catch(_e){}
  });

  // Dream Lesson prompt
  const prompts = [
    'Write the world you would rebuild and choose one symbol to carry it.',
    'Name the feeling you want to normalize and design one ritual for it.',
    'If courage was a color today how would you wear it at work.',
    'Describe a law of kindness that could survive the real world.',
    'Write a chorus that tells the truth without breaking the dream.'
  ];
  const out = document.getElementById('promptOut');
  document.getElementById('promptBtn').addEventListener('click', function(){
    const p = prompts[Math.floor(Math.random()*prompts.length)];
    out.textContent = p;
  });
  document.getElementById('copyPrompt').addEventListener('click', async function(){
    if(!out.textContent) return;
    try{
      await navigator.clipboard.writeText(out.textContent);
      this.textContent = 'Copied';
      setTimeout(()=>{ this.textContent = 'Copy the line'; }, 900);
    }catch(_e){}
  });

  // iOS unlock - first user gesture will initialize audio cleanly
  window.addEventListener('touchend', function once(){
    ensureAudio();
    window.removeEventListener('touchend', once, false);
  }, {passive:true});
})();
</script>
</body>
</html>
